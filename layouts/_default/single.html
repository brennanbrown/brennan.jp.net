{{ define "main" }}

<article class="single-post h-entry">
  <header class="post-header">
    <h1 class="post-title p-name">{{ .Title }}</h1>
    {{ with .Params.featured_image }}
    <div class="featured-image-container">
      <img src="{{ . }}" alt="{{ $.Params.featured_image_alt }}" class="featured-image">
      {{ with $.Params.featured_image_caption }}
      <div class="featured-image-caption">{{ . }}</div>
      {{ end }}
    </div>
    {{ end }}
    <div class="post-meta-bar">
      <span class="post-date dt-published">ğŸ“… <time datetime="{{ .Date.Format "2006-01-02T15:04:05-07:00" }}">{{ .Date.Format "2006-01-02" }}</time></span>
      {{ if .Params.categories }}
      <span class="post-categories">
        ğŸ“ {{ range $i, $cat := .Params.categories }}{{ if $i }}, {{ end }}<a href="{{ (urlize $cat) | absLangURL }}" class="p-category">{{ $cat }}</a>{{ end }}
      </span>
      {{ end }}
      {{ if .Params.tags }}
      <span class="post-tags">
        ğŸ·ï¸ {{ range $i, $tag := .Params.tags }}{{ if $i }}, {{ end }}<a href="{{ (urlize $tag) | absLangURL }}" rel="tag">{{ $tag }}</a>{{ end }}
      </span>
      {{ end }}
      <span class="post-reading-time">â±ï¸ {{ .ReadingTime }} min read</span>
      {{ if ne (.Lastmod.Format "2006-01-02") (.Date.Format "2006-01-02") }}
      <span class="post-updated">ğŸ”„ Updated: {{ .Lastmod.Format "2006-01-02" }}</span>
      {{ end }}
    </div>
    {{ with .Params.tags }}
    <div class="post-tags-bar">
      ğŸ·ï¸ {{ range . }}<a href="{{ "tags/" | relURL }}{{ . | urlize }}/" class="tag">{{ . }}</a> {{ end }}
    </div>
    {{ end }}
  </header>

  <div class="post-content e-content">
    {{ .Content }}
  </div>

  <footer class="post-footer-bar">
    <div class="share-links">
      <strong>Share:</strong>
      <a href="https://mastodon.social/share?url={{ .Permalink }}&text={{ .Title }}" rel="noopener" target="_blank">[Mastodon]</a>
      <a href="https://www.threads.net/intent/post?url={{ .Permalink }}&text={{ .Title }}" rel="noopener" target="_blank">[Threads]</a>
      <a href="mailto:?subject={{ .Title }}&body={{ .Permalink }}">[Email]</a>
    </div>
    
    <div class="h-card p-author" style="display: none;">
      <span class="p-name">{{ .Site.Params.author }}</span>
      <a class="u-url" href="{{ .Site.BaseURL }}">{{ .Site.BaseURL }}</a>
    </div>

    {{ $related := .Site.RegularPages.Related . | first 5 }}
    {{ if $related }}
    <div class="related-posts">
      <h3>âœ¨ Related Posts</h3>
      <div class="related-grid">
        {{ range $related }}
        <div class="related-item">
          <a href="{{ .Permalink }}">{{ .Title }}</a>
          <span class="related-date">{{ .Date.Format "2006-01-02" }}</span>
        </div>
        {{ end }}
      </div>
    </div>
    {{ end }}

    <nav class="post-navigation" aria-label="Post navigation">
      {{ with .PrevInSection }}
      <a href="{{ .Permalink }}" class="nav-btn nav-prev">&laquo; {{ .Title }}</a>
      {{ end }}
      {{ with .NextInSection }}
      <a href="{{ .Permalink }}" class="nav-btn nav-next">{{ .Title }} &raquo;</a>
      {{ end }}
    </nav>
  </footer>
</article>

{{ end }}
